{"version":3,"sources":["onepagecracked.js"],"names":[],"mappings":"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","file":"onepagecracked-compiled.js","sourcesContent":["const mainSection = getArticleSectionElementFromDocument(document);\nvar numberOfPages = 0;\nconst articleSectionsFromTheOtherPages = [];\nconst INDEX_OF_SECOND_PAGE = 2;\nvar goToNextArticleAnchor;\nvar urlsOfFollowingPages;\n\nif (mainSection !== null && typeof (mainSection) !== \"undefined\") {\n    numberOfPages = findNumberOfPages();\n    urlsOfFollowingPages = findUrlsOfFollowingPages(window.location.href, numberOfPages);\n\n    for (let i = INDEX_OF_SECOND_PAGE; i <= numberOfPages; i++) {\n        fetchContentFromPageAndAppendWhenReady(urlsOfFollowingPages[i - INDEX_OF_SECOND_PAGE], i);\n    }\n\n}\n\nfunction findNumberOfPages () {\n    return Number(document.getElementsByClassName(\"paginationNumber\")[1].textContent);\n}\n\nfunction findUrlsOfFollowingPages (urlOfFirstPage, totalNumberOfPages) {\n    const titlePortionOfFirstPage = findTitlePortionOfTheUrl(urlOfFirstPage);\n    let urlsOfAllPages = [];\n    for (let i = 2; i <= totalNumberOfPages; i++) {\n        const titlePortionOfThisPage = titlePortionOfFirstPage + \"_p\" + i;\n        const urlOfNextPage = urlOfFirstPage.replace(titlePortionOfFirstPage, titlePortionOfThisPage);\n        urlsOfAllPages.push(urlOfNextPage);\n    }\n    return urlsOfAllPages;\n}\n\n\nfunction findTitlePortionOfTheUrl (urlOfFirstPage) {\n    const regexp = /http:\\/\\/www.cracked.com\\/(?:(?:blog|article)\\/)?([^\\/]*)(?:\\/|\\.html).*/;\n    const info = regexp.exec(urlOfFirstPage);\n    return info[1];\n}\n\nfunction fetchContentFromPageAndAppendWhenReady (url, pageNumber) {\n\n    let requestForPage = new XMLHttpRequest();\n    requestForPage.open(\"GET\", url, true);\n    requestForPage.onload = function () {\n        if (requestForPage.readyState === XMLHttpRequest.DONE) {\n            if (requestForPage.status === 200) {\n                const parser = new DOMParser();\n                const parsedDocument = parser.parseFromString(requestForPage.response, \"text/html\");\n                articleSectionsFromTheOtherPages[pageNumber] = getArticleSectionElementFromDocument(parsedDocument);\n\n                if (pageNumber === numberOfPages) {\n                    goToNextArticleAnchor = parsedDocument.getElementsByClassName(\"blueArrowNext\")[0];\n                }\n\n                if (areAllPagesLoaded()) {\n                    appendContentToThisPage();\n                    repositionSocialAndPaginationButtons();\n                    updatePagesCount();\n                    replaceNextPageWithNextArticle();\n                }\n\n            }\n        }\n    };\n\n    requestForPage.send(null);\n\n}\n\nfunction repositionSocialAndPaginationButtons () {\n    var likeOnFacebookWidget = document.getElementsByClassName(\"FacebookLike\")[0];\n    var paginationNavBar = document.getElementsByClassName(\"PaginationContent\")[0];\n    var shareButtons = document.getElementsByClassName(\"socialShareAfterContent\")[0];\n    likeOnFacebookWidget.parentElement.removeChild(likeOnFacebookWidget);\n    paginationNavBar.parentElement.removeChild(paginationNavBar);\n    shareButtons.parentElement.removeChild(shareButtons);\n\n    mainSection.parentNode.appendChild(likeOnFacebookWidget);\n    mainSection.parentNode.appendChild(paginationNavBar);\n    mainSection.parentNode.appendChild(shareButtons);\n}\n\nfunction updatePagesCount () {\n    var totalPagesNumberElement = document.getElementsByClassName(\"paginationNumber\")[1];\n    totalPagesNumberElement.textContent = \"1\";\n}\nfunction replaceNextPageWithNextArticle () {\n    var nextPageAnchor = document.getElementsByClassName(\"next\")[0];\n    var parent = nextPageAnchor.parentElement;\n    parent.removeChild(nextPageAnchor);\n    parent.appendChild(goToNextArticleAnchor);\n\n}\n\nfunction areAllPagesLoaded () {\n    for (let i = INDEX_OF_SECOND_PAGE; i <= numberOfPages; i++) {\n        if (typeof (articleSectionsFromTheOtherPages[i]) === \"undefined\") {\n            return false;\n        }\n    }\n    return true;\n}\n\nfunction appendContentToThisPage () {\n    for (let i = INDEX_OF_SECOND_PAGE; i <= numberOfPages; i++) {\n        const articleSectionFromTheOtherPage = articleSectionsFromTheOtherPages[i];\n        loadAllImagesFromArticleSection(articleSectionFromTheOtherPage);\n        mainSection.parentNode.appendChild(articleSectionFromTheOtherPage);\n    }\n}\n\nfunction loadAllImagesFromArticleSection (section) {\n    var allImageElements = section.getElementsByTagName(\"img\");\n    for (let i = 0; i < allImageElements.length; i++) {\n        const imageElement = allImageElements[i];\n        const imageUrl = imageElement.getAttribute(\"data-img\");\n        imageElement.removeAttribute(\"data-img\");\n        imageElement.src = imageUrl;\n    }\n}\n\nfunction getArticleSectionElementFromDocument (htmlDocument) {\n    // var rightSide = htmlDocument.getElementById(\"safePlace\");\n    var article = htmlDocument.getElementsByTagName(\"article\")[0];\n    if (article !== null && typeof (article) === \"undefined\") {\n        const bodySection = article.getElementsByTagName(\"section\")[0];\n        return bodySection.getElementsByTagName(\"section\")[0];\n    }\n}\n"]}